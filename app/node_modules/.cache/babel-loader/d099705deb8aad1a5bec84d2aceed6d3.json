{"ast":null,"code":"var _jsxFileName = \"C:\\\\Progetti\\\\weight-control\\\\app\\\\src\\\\pages\\\\home\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport styled from 'styled-components';\nimport React, { useLayoutEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport Title from '../../components/Title';\nimport { Color } from '../../theme/ColorSchema';\nimport Card from '../../components/Card';\nimport CalendarIcon from '../../assets/icons/CalendarIcon';\nimport WeightFilter from './fragments/WeightFilter';\nimport Chart from './fragments/Chart';\nimport WeightDetailsDialog from './fragments/WeightDetailsDialog';\nimport WeightAddDialog from './fragments/WeightAddDialog';\nimport getHomeActionCreator, { GET_HOME } from '../../store/state/home/actionCreator/getHomeActionCreator';\nimport Header from '../../components/Header';\nimport postWeightActionCreator from '../../store/state/home/actionCreator/postWeightActionCreator';\nimport { useHomeNotification } from '../../store/state/home/selectors/homeNotificationSelector';\nimport PlusIcon from '../../assets/icons/PlusIcon';\nimport MediaQuerySelector from '../../constants/responsive/MediaQuerySelector';\nimport { useFetchType } from '../../store/state/common/selectors/fetchSelector';\nimport HomeSkeleton from './fragments/HomeSkeleton';\nimport resetHomeErrorActionCreator from '../../store/state/home/actionCreator/resetHomeErrorActionCreator';\nimport useSnackbar from '../../utils/useSnackbar';\nimport dailyWeightSelector from '../../store/state/home/selectors/dailyWeightSelector';\nimport WeightList from './fragments/WeightList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  background-color: ${p => p.theme[Color.BACKGROUND]};\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 32px;\n`;\n_c = Container;\nconst CardContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  margin: 0 -24px;\n  padding-bottom: 16px;\n`;\n_c2 = CardContainer;\nconst Left = styled.div`\n  width: 60%;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\n    display: none;\n  }\n`;\n_c3 = Left;\nconst Right = styled.div`\n  width: 40%;\n  padding-left: 24px;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: auto;\n\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\n    width: 100%;\n    padding-left: 0;\n  }\n`;\n_c4 = Right;\nconst MobileTitle = styled.div`\n  display: none;\n\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\n    display: block;\n  }\n`;\n_c5 = MobileTitle;\nconst ContainerWeightFilterDesktop = styled.div`\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\n    display: none;\n  }\n`;\n_c6 = ContainerWeightFilterDesktop;\nconst WeightContainer = styled.div`\n  display: flex;\n  height: 100%;\n  overflow: hidden;\n`;\n_c7 = WeightContainer;\nconst Clickable = styled.span`\n  margin-left: 4px;\n  cursor: pointer;\n  color: ${p => p.theme[Color.PRIMARY]};\n`;\n_c8 = Clickable;\nconst ContainerIcon = styled.div`\n  height: 24px;\n  width: 24px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 20px;\n\n  :hover {\n    background-color: ${p => p.theme[Color.BORDER]};\n  }\n`;\n_c9 = ContainerIcon;\n\nconst Home = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const todayWeight = useSelector(dailyWeightSelector(moment()));\n  const lastWeekWeight = useSelector(dailyWeightSelector(moment().subtract(7, 'days')));\n  const {\n    t\n  } = useTranslation();\n  const notification = useHomeNotification();\n  const [openedAdd, setOpenedAdd] = useState(false);\n  const [openedDetails, setOpenedDetails] = useState(false);\n  const [selectedId, setSelectedId] = useState(null);\n  const [defaultDate, setDefaultDate] = useState(null);\n  const [startDateFilter, setStartDateFilter] = useState(moment().subtract(1, 'week'));\n  const [endDateFilter, setEndDateFilter] = useState(moment());\n  const [showLabel, setShowLabel] = useState(true);\n  const fetching = useFetchType(GET_HOME);\n\n  const handleOpenSnackbar = () => setOpenedAdd(false);\n\n  const renderSnackbar = useSnackbar(notification, resetHomeErrorActionCreator, handleOpenSnackbar);\n  useLayoutEffect(() => {\n    dispatch(getHomeActionCreator());\n  }, []);\n\n  const renderAddWeightWelcome = () => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: t('home.noWeightToday')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Clickable, {\n      onClick: () => setOpenedAdd(true),\n      children: t('home.addTodayWeight')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n\n  const handleAddWeight = (date, weight, note) => {\n    dispatch(postWeightActionCreator(date, weight, note));\n    setDefaultDate(null);\n  };\n\n  const handleOpenDetails = id => {\n    setSelectedId(id);\n    setOpenedDetails(true);\n  };\n\n  const handleCloseAdd = () => {\n    setOpenedAdd(false);\n    setDefaultDate(null);\n  };\n\n  const handleOpenAddNextWeek = () => {\n    setDefaultDate(moment().subtract(1, 'week'));\n    setOpenedAdd(true);\n  };\n\n  if (fetching) {\n    return /*#__PURE__*/_jsxDEV(HomeSkeleton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [renderSnackbar(), /*#__PURE__*/_jsxDEV(WeightDetailsDialog, {\n      open: openedDetails,\n      onClose: () => setOpenedDetails(false),\n      id: selectedId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WeightAddDialog, {\n      defaultDate: defaultDate,\n      open: openedAdd,\n      onClose: handleCloseAdd,\n      onPrimary: (date, weight, note) => handleAddWeight(date, weight, note)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: 48\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Title, {\n      title: t('home.welcomeUser'),\n      subtitle: todayWeight ? t('home.weightToday') : renderAddWeightWelcome()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        title: 'Today\\'s weight',\n        value: todayWeight,\n        icon: /*#__PURE__*/_jsxDEV(CalendarIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 18\n        }, this),\n        placeholder: /*#__PURE__*/_jsxDEV(ContainerIcon, {\n          onClick: () => setOpenedAdd(true),\n          children: /*#__PURE__*/_jsxDEV(PlusIcon, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"Last week\",\n        value: lastWeekWeight,\n        icon: /*#__PURE__*/_jsxDEV(CalendarIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 18\n        }, this),\n        placeholder: /*#__PURE__*/_jsxDEV(ContainerIcon, {\n          onClick: handleOpenAddNextWeek,\n          children: /*#__PURE__*/_jsxDEV(PlusIcon, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ContainerWeightFilterDesktop, {\n      children: /*#__PURE__*/_jsxDEV(WeightFilter, {\n        startDate: startDateFilter,\n        onChangeStartDate: setStartDateFilter,\n        endDate: endDateFilter,\n        onChangeEndDate: setEndDateFilter,\n        showLabel: showLabel,\n        onChangeLabelVisibility: setShowLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WeightContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Left, {\n        children: /*#__PURE__*/_jsxDEV(Chart, {\n          startDate: startDateFilter,\n          endDate: endDateFilter,\n          showLabel: showLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Right, {\n        children: [/*#__PURE__*/_jsxDEV(MobileTitle, {\n          children: /*#__PURE__*/_jsxDEV(WeightFilter, {\n            startDate: startDateFilter,\n            onChangeStartDate: setStartDateFilter,\n            endDate: endDateFilter,\n            onChangeEndDate: setEndDateFilter,\n            showLabel: showLabel,\n            onChangeLabelVisibility: setShowLabel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(WeightList, {\n          onClick: handleOpenDetails,\n          endDate: endDateFilter,\n          startDate: startDateFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"2k6/rRKsE1OgEt8nNcimpi0+BBo=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useTranslation, useHomeNotification, useFetchType, useSnackbar];\n});\n\n_c10 = Home;\nexport default Home;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"CardContainer\");\n$RefreshReg$(_c3, \"Left\");\n$RefreshReg$(_c4, \"Right\");\n$RefreshReg$(_c5, \"MobileTitle\");\n$RefreshReg$(_c6, \"ContainerWeightFilterDesktop\");\n$RefreshReg$(_c7, \"WeightContainer\");\n$RefreshReg$(_c8, \"Clickable\");\n$RefreshReg$(_c9, \"ContainerIcon\");\n$RefreshReg$(_c10, \"Home\");","map":{"version":3,"sources":["C:/Progetti/weight-control/app/src/pages/home/Home.js"],"names":["styled","React","useLayoutEffect","useState","useDispatch","useSelector","moment","useTranslation","Title","Color","Card","CalendarIcon","WeightFilter","Chart","WeightDetailsDialog","WeightAddDialog","getHomeActionCreator","GET_HOME","Header","postWeightActionCreator","useHomeNotification","PlusIcon","MediaQuerySelector","useFetchType","HomeSkeleton","resetHomeErrorActionCreator","useSnackbar","dailyWeightSelector","WeightList","Container","div","p","theme","BACKGROUND","CardContainer","Left","MEDIUM_AND_SMALL","Right","MobileTitle","ContainerWeightFilterDesktop","WeightContainer","Clickable","span","PRIMARY","ContainerIcon","BORDER","Home","dispatch","todayWeight","lastWeekWeight","subtract","t","notification","openedAdd","setOpenedAdd","openedDetails","setOpenedDetails","selectedId","setSelectedId","defaultDate","setDefaultDate","startDateFilter","setStartDateFilter","endDateFilter","setEndDateFilter","showLabel","setShowLabel","fetching","handleOpenSnackbar","renderSnackbar","renderAddWeightWelcome","handleAddWeight","date","weight","note","handleOpenDetails","id","handleCloseAdd","handleOpenAddNextWeek","height"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,mBAAnB;AACA,OAAOC,KAAP,IAAgBC,eAAhB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,SAASC,KAAT,QAAsB,yBAAtB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,mBAAP,MAAgC,iCAAhC;AACA,OAAOC,eAAP,MAA4B,6BAA5B;AACA,OAAOC,oBAAP,IAA+BC,QAA/B,QAA+C,2DAA/C;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,uBAAP,MAAoC,8DAApC;AACA,SAASC,mBAAT,QAAoC,2DAApC;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,kBAAP,MAA+B,+CAA/B;AACA,SAASC,YAAT,QAA6B,kDAA7B;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,2BAAP,MACO,kEADP;AAEA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,OAAOC,mBAAP,MAAgC,sDAAhC;AACA,OAAOC,UAAP,MAAuB,wBAAvB;;;AAEA,MAAMC,SAAS,GAAG7B,MAAM,CAAC8B,GAAI;AAC7B,sBAAuBC,CAAD,IAAOA,CAAC,CAACC,KAAF,CAAQvB,KAAK,CAACwB,UAAd,CAA0B;AACvD;AACA;AACA;AACA;AACA,CANA;KAAMJ,S;AAQN,MAAMK,aAAa,GAAGlC,MAAM,CAAC8B,GAAI;AACjC;AACA;AACA;AACA;AACA;AACA,CANA;MAAMI,a;AAQN,MAAMC,IAAI,GAAGnC,MAAM,CAAC8B,GAAI;AACxB;AACA;AACA;AACA;AACA;AACA,IAAIR,kBAAkB,CAACc,gBAAiB;AACxC;AACA;AACA,CATA;MAAMD,I;AAWN,MAAME,KAAK,GAAGrC,MAAM,CAAC8B,GAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIR,kBAAkB,CAACc,gBAAiB;AACxC;AACA;AACA;AACA,CAZA;MAAMC,K;AAcN,MAAMC,WAAW,GAAGtC,MAAM,CAAC8B,GAAI;AAC/B;AACA;AACA,IAAIR,kBAAkB,CAACc,gBAAiB;AACxC;AACA;AACA,CANA;MAAME,W;AAQN,MAAMC,4BAA4B,GAAGvC,MAAM,CAAC8B,GAAI;AAChD,IAAIR,kBAAkB,CAACc,gBAAiB;AACxC;AACA;AACA,CAJA;MAAMG,4B;AAMN,MAAMC,eAAe,GAAGxC,MAAM,CAAC8B,GAAI;AACnC;AACA;AACA;AACA,CAJA;MAAMU,e;AAMN,MAAMC,SAAS,GAAGzC,MAAM,CAAC0C,IAAK;AAC9B;AACA;AACA,WAAYX,CAAD,IAAOA,CAAC,CAACC,KAAF,CAAQvB,KAAK,CAACkC,OAAd,CAAuB;AACzC,CAJA;MAAMF,S;AAMN,MAAMG,aAAa,GAAG5C,MAAM,CAAC8B,GAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAyBC,CAAD,IAAOA,CAAC,CAACC,KAAF,CAAQvB,KAAK,CAACoC,MAAd,CAAsB;AACrD;AACA,CAZA;MAAMD,a;;AAcN,MAAME,IAAI,GAAG,MAAM;AAAA;;AACjB,QAAMC,QAAQ,GAAG3C,WAAW,EAA5B;AACA,QAAM4C,WAAW,GAAG3C,WAAW,CAACsB,mBAAmB,CAACrB,MAAM,EAAP,CAApB,CAA/B;AACA,QAAM2C,cAAc,GAAG5C,WAAW,CAACsB,mBAAmB,CAACrB,MAAM,GAC1D4C,QADoD,CAC3C,CAD2C,EACxC,MADwC,CAAD,CAApB,CAAlC;AAEA,QAAM;AAAEC,IAAAA;AAAF,MAAQ5C,cAAc,EAA5B;AACA,QAAM6C,YAAY,GAAGhC,mBAAmB,EAAxC;AAEA,QAAM,CAACiC,SAAD,EAAYC,YAAZ,IAA4BnD,QAAQ,CAAC,KAAD,CAA1C;AAEA,QAAM,CAACoD,aAAD,EAAgBC,gBAAhB,IAAoCrD,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACsD,UAAD,EAAaC,aAAb,IAA8BvD,QAAQ,CAAC,IAAD,CAA5C;AAEA,QAAM,CAACwD,WAAD,EAAcC,cAAd,IAAgCzD,QAAQ,CAAC,IAAD,CAA9C;AAEA,QAAM,CAAC0D,eAAD,EAAkBC,kBAAlB,IAAwC3D,QAAQ,CAACG,MAAM,GAC1D4C,QADoD,CAC3C,CAD2C,EACxC,MADwC,CAAD,CAAtD;AAEA,QAAM,CAACa,aAAD,EAAgBC,gBAAhB,IAAoC7D,QAAQ,CAACG,MAAM,EAAP,CAAlD;AACA,QAAM,CAAC2D,SAAD,EAAYC,YAAZ,IAA4B/D,QAAQ,CAAC,IAAD,CAA1C;AAEA,QAAMgE,QAAQ,GAAG5C,YAAY,CAACN,QAAD,CAA7B;;AAEA,QAAMmD,kBAAkB,GAAG,MAAMd,YAAY,CAAC,KAAD,CAA7C;;AACA,QAAMe,cAAc,GAAG3C,WAAW,CAAC0B,YAAD,EAAe3B,2BAAf,EAA4C2C,kBAA5C,CAAlC;AAEAlE,EAAAA,eAAe,CAAC,MAAM;AACpB6C,IAAAA,QAAQ,CAAC/B,oBAAoB,EAArB,CAAR;AACD,GAFc,EAEZ,EAFY,CAAf;;AAIA,QAAMsD,sBAAsB,GAAG,mBAC7B;AAAA,4BACE;AAAA,gBAAOnB,CAAC,CAAC,oBAAD;AAAR;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,SAAD;AAAW,MAAA,OAAO,EAAE,MAAMG,YAAY,CAAC,IAAD,CAAtC;AAAA,gBAA+CH,CAAC,CAAC,qBAAD;AAAhD;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA,kBADF;;AAOA,QAAMoB,eAAe,GAAG,CAACC,IAAD,EAAOC,MAAP,EAAeC,IAAf,KAAwB;AAC9C3B,IAAAA,QAAQ,CAAC5B,uBAAuB,CAACqD,IAAD,EAAOC,MAAP,EAAeC,IAAf,CAAxB,CAAR;AACAd,IAAAA,cAAc,CAAC,IAAD,CAAd;AACD,GAHD;;AAKA,QAAMe,iBAAiB,GAAIC,EAAD,IAAQ;AAChClB,IAAAA,aAAa,CAACkB,EAAD,CAAb;AACApB,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,GAHD;;AAKA,QAAMqB,cAAc,GAAG,MAAM;AAC3BvB,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAM,IAAAA,cAAc,CAAC,IAAD,CAAd;AACD,GAHD;;AAKA,QAAMkB,qBAAqB,GAAG,MAAM;AAClClB,IAAAA,cAAc,CAACtD,MAAM,GAClB4C,QADY,CACH,CADG,EACA,MADA,CAAD,CAAd;AAEAI,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,GAJD;;AAMA,MAAIa,QAAJ,EAAc;AACZ,wBAAQ,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,YAAR;AACD;;AAED,sBACE,QAAC,SAAD;AAAA,eACGE,cAAc,EADjB,eAEE,QAAC,mBAAD;AACE,MAAA,IAAI,EAAEd,aADR;AAEE,MAAA,OAAO,EAAE,MAAMC,gBAAgB,CAAC,KAAD,CAFjC;AAGE,MAAA,EAAE,EAAEC;AAHN;AAAA;AAAA;AAAA;AAAA,YAFF,eAOE,QAAC,eAAD;AACE,MAAA,WAAW,EAAEE,WADf;AAEE,MAAA,IAAI,EAAEN,SAFR;AAGE,MAAA,OAAO,EAAEwB,cAHX;AAIE,MAAA,SAAS,EAAE,CAACL,IAAD,EAAOC,MAAP,EAAeC,IAAf,KAAwBH,eAAe,CAACC,IAAD,EAAOC,MAAP,EAAeC,IAAf;AAJpD;AAAA;AAAA;AAAA;AAAA,YAPF,eAaE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YAbF,eAcE;AAAK,MAAA,KAAK,EAAE;AAAEK,QAAAA,MAAM,EAAE;AAAV;AAAZ;AAAA;AAAA;AAAA;AAAA,YAdF,eAeE,QAAC,KAAD;AACE,MAAA,KAAK,EAAE5B,CAAC,CAAC,kBAAD,CADV;AAEE,MAAA,QAAQ,EAAEH,WAAW,GAAGG,CAAC,CAAC,kBAAD,CAAJ,GAA2BmB,sBAAsB;AAFxE;AAAA;AAAA;AAAA;AAAA,YAfF,eAmBE,QAAC,aAAD;AAAA,8BACE,QAAC,IAAD;AACE,QAAA,KAAK,EAAE,iBADT;AAEE,QAAA,KAAK,EAAEtB,WAFT;AAGE,QAAA,IAAI,eAAG,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,gBAHT;AAIE,QAAA,WAAW,eACT,QAAC,aAAD;AAAe,UAAA,OAAO,EAAE,MAAMM,YAAY,CAAC,IAAD,CAA1C;AAAA,iCACE,QAAC,QAAD;AAAU,YAAA,IAAI,EAAE;AAAhB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,cADF,eAWE,QAAC,IAAD;AACE,QAAA,KAAK,EAAC,WADR;AAEE,QAAA,KAAK,EAAEL,cAFT;AAGE,QAAA,IAAI,eAAG,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,gBAHT;AAIE,QAAA,WAAW,eACT,QAAC,aAAD;AAAe,UAAA,OAAO,EAAE6B,qBAAxB;AAAA,iCACE,QAAC,QAAD;AAAU,YAAA,IAAI,EAAE;AAAhB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,cAXF;AAAA;AAAA;AAAA;AAAA;AAAA,YAnBF,eAyCE,QAAC,4BAAD;AAAA,6BACE,QAAC,YAAD;AACE,QAAA,SAAS,EAAEjB,eADb;AAEE,QAAA,iBAAiB,EAAEC,kBAFrB;AAGE,QAAA,OAAO,EAAEC,aAHX;AAIE,QAAA,eAAe,EAAEC,gBAJnB;AAKE,QAAA,SAAS,EAAEC,SALb;AAME,QAAA,uBAAuB,EAAEC;AAN3B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAzCF,eAmDE,QAAC,eAAD;AAAA,8BACE,QAAC,IAAD;AAAA,+BACE,QAAC,KAAD;AAAO,UAAA,SAAS,EAAEL,eAAlB;AAAmC,UAAA,OAAO,EAAEE,aAA5C;AAA2D,UAAA,SAAS,EAAEE;AAAtE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE,QAAC,KAAD;AAAA,gCACE,QAAC,WAAD;AAAA,iCACE,QAAC,YAAD;AACE,YAAA,SAAS,EAAEJ,eADb;AAEE,YAAA,iBAAiB,EAAEC,kBAFrB;AAGE,YAAA,OAAO,EAAEC,aAHX;AAIE,YAAA,eAAe,EAAEC,gBAJnB;AAKE,YAAA,SAAS,EAAEC,SALb;AAME,YAAA,uBAAuB,EAAEC;AAN3B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAWE,QAAC,UAAD;AACE,UAAA,OAAO,EAAES,iBADX;AAEE,UAAA,OAAO,EAAEZ,aAFX;AAGE,UAAA,SAAS,EAAEF;AAHb;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA,YAnDF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA4ED,CAzID;;GAAMf,I;UACa1C,W,EACGC,W,EACGA,W,EAETE,c,EACOa,mB,EAcJG,Y,EAGMG,W;;;OAvBnBoB,I;AA2IN,eAAeA,IAAf","sourcesContent":["import styled from 'styled-components';\r\nimport React, { useLayoutEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Title from '../../components/Title';\r\nimport { Color } from '../../theme/ColorSchema';\r\nimport Card from '../../components/Card';\r\nimport CalendarIcon from '../../assets/icons/CalendarIcon';\r\nimport WeightFilter from './fragments/WeightFilter';\r\nimport Chart from './fragments/Chart';\r\nimport WeightDetailsDialog from './fragments/WeightDetailsDialog';\r\nimport WeightAddDialog from './fragments/WeightAddDialog';\r\nimport getHomeActionCreator, { GET_HOME } from '../../store/state/home/actionCreator/getHomeActionCreator';\r\nimport Header from '../../components/Header';\r\nimport postWeightActionCreator from '../../store/state/home/actionCreator/postWeightActionCreator';\r\nimport { useHomeNotification } from '../../store/state/home/selectors/homeNotificationSelector';\r\nimport PlusIcon from '../../assets/icons/PlusIcon';\r\nimport MediaQuerySelector from '../../constants/responsive/MediaQuerySelector';\r\nimport { useFetchType } from '../../store/state/common/selectors/fetchSelector';\r\nimport HomeSkeleton from './fragments/HomeSkeleton';\r\nimport resetHomeErrorActionCreator\r\n  from '../../store/state/home/actionCreator/resetHomeErrorActionCreator';\r\nimport useSnackbar from '../../utils/useSnackbar';\r\nimport dailyWeightSelector from '../../store/state/home/selectors/dailyWeightSelector';\r\nimport WeightList from './fragments/WeightList';\r\n\r\nconst Container = styled.div`\r\n  background-color: ${(p) => p.theme[Color.BACKGROUND]};\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 32px;\r\n`;\r\n\r\nconst CardContainer = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  margin: 0 -24px;\r\n  padding-bottom: 16px;\r\n`;\r\n\r\nconst Left = styled.div`\r\n  width: 60%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n\r\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst Right = styled.div`\r\n  width: 40%;\r\n  padding-left: 24px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  overflow: auto;\r\n\r\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\r\n    width: 100%;\r\n    padding-left: 0;\r\n  }\r\n`;\r\n\r\nconst MobileTitle = styled.div`\r\n  display: none;\r\n\r\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\r\n    display: block;\r\n  }\r\n`;\r\n\r\nconst ContainerWeightFilterDesktop = styled.div`\r\n  ${MediaQuerySelector.MEDIUM_AND_SMALL} {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst WeightContainer = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Clickable = styled.span`\r\n  margin-left: 4px;\r\n  cursor: pointer;\r\n  color: ${(p) => p.theme[Color.PRIMARY]};\r\n`;\r\n\r\nconst ContainerIcon = styled.div`\r\n  height: 24px;\r\n  width: 24px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 20px;\r\n\r\n  :hover {\r\n    background-color: ${(p) => p.theme[Color.BORDER]};\r\n  }\r\n`;\r\n\r\nconst Home = () => {\r\n  const dispatch = useDispatch();\r\n  const todayWeight = useSelector(dailyWeightSelector(moment()));\r\n  const lastWeekWeight = useSelector(dailyWeightSelector(moment()\r\n    .subtract(7, 'days')));\r\n  const { t } = useTranslation();\r\n  const notification = useHomeNotification();\r\n\r\n  const [openedAdd, setOpenedAdd] = useState(false);\r\n\r\n  const [openedDetails, setOpenedDetails] = useState(false);\r\n  const [selectedId, setSelectedId] = useState(null);\r\n\r\n  const [defaultDate, setDefaultDate] = useState(null);\r\n\r\n  const [startDateFilter, setStartDateFilter] = useState(moment()\r\n    .subtract(1, 'week'));\r\n  const [endDateFilter, setEndDateFilter] = useState(moment());\r\n  const [showLabel, setShowLabel] = useState(true);\r\n\r\n  const fetching = useFetchType(GET_HOME);\r\n\r\n  const handleOpenSnackbar = () => setOpenedAdd(false);\r\n  const renderSnackbar = useSnackbar(notification, resetHomeErrorActionCreator, handleOpenSnackbar);\r\n\r\n  useLayoutEffect(() => {\r\n    dispatch(getHomeActionCreator());\r\n  }, []);\r\n\r\n  const renderAddWeightWelcome = () => (\r\n    <>\r\n      <span>{t('home.noWeightToday')}</span>\r\n      <Clickable onClick={() => setOpenedAdd(true)}>{t('home.addTodayWeight')}</Clickable>\r\n    </>\r\n  );\r\n\r\n  const handleAddWeight = (date, weight, note) => {\r\n    dispatch(postWeightActionCreator(date, weight, note));\r\n    setDefaultDate(null);\r\n  };\r\n\r\n  const handleOpenDetails = (id) => {\r\n    setSelectedId(id);\r\n    setOpenedDetails(true);\r\n  };\r\n\r\n  const handleCloseAdd = () => {\r\n    setOpenedAdd(false);\r\n    setDefaultDate(null);\r\n  };\r\n\r\n  const handleOpenAddNextWeek = () => {\r\n    setDefaultDate(moment()\r\n      .subtract(1, 'week'));\r\n    setOpenedAdd(true);\r\n  };\r\n\r\n  if (fetching) {\r\n    return (<HomeSkeleton />);\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      {renderSnackbar()}\r\n      <WeightDetailsDialog\r\n        open={openedDetails}\r\n        onClose={() => setOpenedDetails(false)}\r\n        id={selectedId}\r\n      />\r\n      <WeightAddDialog\r\n        defaultDate={defaultDate}\r\n        open={openedAdd}\r\n        onClose={handleCloseAdd}\r\n        onPrimary={(date, weight, note) => handleAddWeight(date, weight, note)}\r\n      />\r\n      <Header />\r\n      <div style={{ height: 48 }} />\r\n      <Title\r\n        title={t('home.welcomeUser')}\r\n        subtitle={todayWeight ? t('home.weightToday') : renderAddWeightWelcome()}\r\n      />\r\n      <CardContainer>\r\n        <Card\r\n          title={'Today\\'s weight'}\r\n          value={todayWeight}\r\n          icon={(<CalendarIcon />)}\r\n          placeholder={(\r\n            <ContainerIcon onClick={() => setOpenedAdd(true)}>\r\n              <PlusIcon size={16} />\r\n            </ContainerIcon>\r\n          )}\r\n        />\r\n        <Card\r\n          title=\"Last week\"\r\n          value={lastWeekWeight}\r\n          icon={(<CalendarIcon />)}\r\n          placeholder={(\r\n            <ContainerIcon onClick={handleOpenAddNextWeek}>\r\n              <PlusIcon size={16} />\r\n            </ContainerIcon>\r\n          )}\r\n        />\r\n      </CardContainer>\r\n      <ContainerWeightFilterDesktop>\r\n        <WeightFilter\r\n          startDate={startDateFilter}\r\n          onChangeStartDate={setStartDateFilter}\r\n          endDate={endDateFilter}\r\n          onChangeEndDate={setEndDateFilter}\r\n          showLabel={showLabel}\r\n          onChangeLabelVisibility={setShowLabel}\r\n        />\r\n      </ContainerWeightFilterDesktop>\r\n      <WeightContainer>\r\n        <Left>\r\n          <Chart startDate={startDateFilter} endDate={endDateFilter} showLabel={showLabel} />\r\n        </Left>\r\n        <Right>\r\n          <MobileTitle>\r\n            <WeightFilter\r\n              startDate={startDateFilter}\r\n              onChangeStartDate={setStartDateFilter}\r\n              endDate={endDateFilter}\r\n              onChangeEndDate={setEndDateFilter}\r\n              showLabel={showLabel}\r\n              onChangeLabelVisibility={setShowLabel}\r\n            />\r\n          </MobileTitle>\r\n          <WeightList\r\n            onClick={handleOpenDetails}\r\n            endDate={endDateFilter}\r\n            startDate={startDateFilter}\r\n          />\r\n        </Right>\r\n      </WeightContainer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}